<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GeoEscazú en Acción</title>
    <link rel="stylesheet" href="estilos/style.css">
    <link rel="stylesheet" href="estilos/mapa.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
</head>
<body>

    <!---------------------------- ENCABEZADO ---------------------------->
    <header>
        <a href="index.html">
        <button class="btn1">
        <img src="Imagenes/planeta-tierra.png" style="height: 40px; vertical-align: middle; margin-right: 4px; width: 40px;"> 
            <h1>GeoEscazú</h1>
        </button>
      </a>
        <nav>
            <a href="noticias.html">NOTICIAS</a>
            <a href="#acerca">ACERCA DE</a>
            <a href="#bibloteca">CENTRO DE DOCUMENTACION</a>
            <a href="#contacto">CONTACTANOS</a>
            <a href="#Acciones">REGISTRA DE ACCIÓN</a>

            
        </nav>
    </header>

    <!---------------------------- FILTROS ---------------------------->
<body>
    <div id="container">
            <button id="btn-toggle-filtros" class="hamburger-mapa">☰</button>
        <div id="filtros">
            <h2>Filtros</h2>
            <div class="filtro-grupo">
                <h3>Categorías</h3>
                <div class="checkbox-item">
                    <input type="checkbox" id="categoria-prueba" checked>
                    <label for="categoria-prueba">Planeación</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="categoria-prueba2" checked>
                    <label for="categoria-prueba2">Iniciados</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="categoria-prueba3" checked>
                    <label for="categoria-prueba3">Terminados</label>
                </div>
                 <div class="checkbox-item">
                    <input type="checkbox" id="categoria-prueba4" checked>
                    <label for="categoria-prueba4">Replicados</label>
                </div>
            </div>
            
            <div class="filtro-grupo">
                <h3>Tipo de Marcador</h3>
                <div class="checkbox-item">
                    <input type="checkbox" id="tipo-marcador" checked>
                    <label for="tipo-marcador">Marcadores</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="tipo-circulo" checked>
                    <label for="tipo-circulo">Círculos</label>
                </div>
            </div>
            
            <button class="btn-reset" id="btn-reset">Mostrar Todos</button>
            
            <div class="leyenda">
                <h3>Caption</h3>
                <div class="leyenda-item">
                    <div class="leyenda-color" style="background-color: #3388ff;"></div>
                    <span>Marcador Normal</span>
                </div>
                <div class="leyenda-item">
                    <div class="leyenda-color" style="background-color: #2ecc71;"></div>
                    <span>Marcador Normal 2</span>
                </div>
                <div class="leyenda-item">
                    <div class="leyenda-color" style="background-color: #f03;"></div>
                    <span>Círculo</span>
                </div>
            </div>
        </div>
        
        <div id="mapa"></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="">
    </script>


    <!---------------------------- El Script para funcionamiento del mapa---------------------------->
    <script>  
        let map = L.map('mapa').setView([14.538806, -90.596888], 12)

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
          
        }).addTo(map); 

    // <!---------------------------- Marcadores, perdonalizados y circulos de concentración---------------------------->
        
        let marcadores = {
            
            'prueba': {
                tipo: 'marcador',
                categoria: 'prueba',
                elemento: L.marker([14.538806, -90.596888]).addTo(map).bindPopup("<b>Prueba</b><br>Soy un subtexto.")
            },
            'prueba2': {
                tipo: 'marcador',
                categoria: 'prueba2',
                elemento: L.marker([14.537701, -90.591900]).addTo(map).bindPopup("<b>Prueba2</b><br>Soy un subtexto2.")
            },
            'prueba2.1': {
                tipo: 'marcador',
                categoria: 'prueba2',
                elemento: L.marker([14.536173, -90.597553]).addTo(map).bindPopup("<b>Prueba2.1</b><br>Soy un subtexto2.1.")
            },
            'prueba3': {
                tipo: 'marcador',
                categoria: 'prueba3',
                elemento: L.marker([14.533922, -90.590339]).addTo(map).bindPopup("<b>Prueba3</b><br>Soy un subtexto3.")
            },
    
            
            'circulo-prueba': {
                tipo: 'circulo',
                categoria: 'prueba',
                elemento: L.circle([14.537701, -90.591900], {
                    color: 'cian', 
                    fillColor: 'cian',
                    fillOpacity: 0.5,
                    radius: 600
                }).addTo(map).bindPopup("Prueba de circulo.")
            },

            'circulo-prueba2': {
                tipo: 'circulo',
                categoria: 'prueba',
                elemento: L.circle([14.540018, -90.572786], {
                    color: 'cian', 
                    fillColor: 'cian',
                    fillOpacity: 0.5,
                    radius: 100
                }).addTo(map).bindPopup("Prueba de circulo.")
            },
            
            
       };

       var Ubicacion = L.icon({
            iconUrl: 'imagenes/ubicacion (1).png',
            iconSize: [38, 55],
            iconAnchor: [26, 54],
            popupAnchor: [-3, -76]
        });


        marcadores['personalizado1'] = {
        tipo: 'marcador',
        categoria: 'prueba4',
        elemento: L.marker([14.540018, -90.572786], {icon: Ubicacion}).addTo(map).bindPopup("<b>Prueba5 </b><br><a href='https://meegt.org/' target='_blank'>https://meegt.org/</a>")

        };
        marcadores['personalizado2'] = {
        tipo: 'marcador',
        categoria: 'prueba4',
        elemento: L.marker([14.539566, -90.572624], {icon: Ubicacion}).addTo(map).bindPopup("<b>Prueba6 </b><br><a href='https://meegt.org/' target='_blank'>https://meegt.org/</a>")

        };
        marcadores['personalizado3'] = {
        tipo: 'marcador',
        categoria: 'prueba4',
        elemento: L.marker([14.539897, -90.573583], {icon: Ubicacion}).addTo(map).bindPopup("<b>Prueba7 </b><br><a href='https://meegt.org/' target='_blank'>https://meegt.org/</a>")

        };


    // <!---------------------------- FILTRO---------------------------->
        function aplicarFiltros() {
            const categoriaPrueba = document.getElementById('categoria-prueba').checked;
            const categoriaPrueba2 = document.getElementById('categoria-prueba2').checked;
            const categoriaPrueba3 = document.getElementById('categoria-prueba3').checked;
            const categoriaPrueba4 = document.getElementById('categoria-prueba4').checked;
            const tipoMarcador = document.getElementById('tipo-marcador').checked;
            const tipoCirculo = document.getElementById('tipo-circulo').checked;
            
    Object.keys(marcadores).forEach(key => {
        const marcador = marcadores[key];
        let mostrar = false;
        
        if (marcador.tipo === 'circulo') {
            if (tipoCirculo) {
                mostrar = true;
            }
        } 
        else if (marcador.tipo === 'marcador') {
            if ((marcador.categoria === 'prueba' && categoriaPrueba) ||
                (marcador.categoria === 'prueba2' && categoriaPrueba2) ||
                (marcador.categoria === 'prueba3' && categoriaPrueba3) ||
                (marcador.categoria === 'prueba4' && categoriaPrueba4)) {
                if (tipoMarcador) {
                    mostrar = true;
                }
            }
        }
                if (mostrar) {
            map.addLayer(marcador.elemento);
        } else {
            map.removeLayer(marcador.elemento);
        }
    });
}

        document.querySelectorAll('#filtros input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', aplicarFiltros);
        });

        document.getElementById('btn-reset').addEventListener('click', function() {
            document.querySelectorAll('#filtros input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });
            aplicarFiltros();
        });

        var popup = L.popup();

        function onMapClick(e) {
            popup
            .setLatLng(e.latlng)
            .setContent("You clicked the map at " + e.latlng.toString())
            .openOn(map);
        }

        map.on('click', onMapClick);
    </script>



<script>
    document.getElementById("btn-toggle-filtros").addEventListener("click", () => {
        document.getElementById("filtros").classList.toggle("mostrar");
    });
</script>



    <!---------------------------- PIE DE PAGINA ---------------------------->
    <footer>
        <p>© 2025 Escazú en Acción | Plataforma ciudadana por la justicia ambiental</p>
        <p>Inspirado en el Acuerdo de Escazú y en la participación ambiental latinoamericana.</p>
    </footer>


</body>
</html>